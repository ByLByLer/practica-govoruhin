using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Комплексное_число_практика_говорухин
{
    public class КомплексноеЧисло
    {
        private double РеальнаяЧасть;
        private double МнимаяЧасть;
        private double Модуль;
        private double Фаза;

        // Конструкторы
        public КомплексноеЧисло(double Реальная, double Мнимая)
        {
            РеальнаяЧасть = Реальная;
            МнимаяЧасть = Мнимая;
            РассчитатьТригонометрическуюФорму();
        }

        // Деструктор
        ~КомплексноеЧисло()
        {
            Console.WriteLine("Комплексное число уничтожено");
        }

        // Арифметические операции
        public static КомплексноеЧисло operator +(КомплексноеЧисло число1, КомплексноеЧисло число2)
        {
            return new КомплексноеЧисло(число1.РеальнаяЧасть + число2.РеальнаяЧасть, число1.МнимаяЧасть + число2.МнимаяЧасть);
        }

        public static КомплексноеЧисло operator -(КомплексноеЧисло число1, КомплексноеЧисло число2)
        {
            return new КомплексноеЧисло(число1.РеальнаяЧасть - число2.РеальнаяЧасть, число1.МнимаяЧасть - число2.МнимаяЧасть);
        }

        public static КомплексноеЧисло operator *(КомплексноеЧисло число1, КомплексноеЧисло число2)
        {
            double Реальная = число1.РеальнаяЧасть * число2.РеальнаяЧасть - число1.МнимаяЧасть * число2.МнимаяЧасть;
            double Мнимая = число1.РеальнаяЧасть * число2.МнимаяЧасть + число1.МнимаяЧасть * число2.РеальнаяЧасть;
            return new КомплексноеЧисло(Реальная, Мнимая);
        }

        public static КомплексноеЧисло operator /(КомплексноеЧисло число1, КомплексноеЧисло число2)
        {
            double Знаменатель = число2.РеальнаяЧасть * число2.РеальнаяЧасть + число2.МнимаяЧасть * число2.МнимаяЧасть;
            double Реальная = (число1.РеальнаяЧасть * число2.РеальнаяЧасть + число1.МнимаяЧасть * число2.МнимаяЧасть) / Знаменатель;
            double Мнимая = (число1.МнимаяЧасть * число2.РеальнаяЧасть - число1.РеальнаяЧасть * число2.МнимаяЧасть) / Знаменатель;
            return new КомплексноеЧисло(Реальная, Мнимая);
        }

        // Операции сравнения
        public static bool operator ==(КомплексноеЧисло число1, КомплексноеЧисло число2)
        {
            return число1.РеальнаяЧасть == число2.РеальнаяЧасть && число1.МнимаяЧасть == число2.МнимаяЧасть;
        }

        public static bool operator !=(КомплексноеЧисло число1, КомплексноеЧисло число2)
        {
            return !(число1 == число2);
        }

        // Преобразование в строку
        public override string ToString()
        {
            if (МнимаяЧасть >= 0)
                return $"{РеальнаяЧасть} + {МнимаяЧасть}";
            else
                return $"{РеальнаяЧасть} - {-МнимаяЧасть}";
        }

        // Статический метод для получения комплексного числа из строки
        public static КомплексноеЧисло ПолучитьИзСтроки(string строка)
        {
            string[] части = строка.Split('+');
            double Реальная = double.Parse(части[0]);
            double Мнимая = double.Parse(части[1].Trim());
            return new КомплексноеЧисло(Реальная, Мнимая);
        }

        // Методы преобразования числа из одной формы в другую
        private void РассчитатьТригонометрическуюФорму()
        {
            Модуль = Math.Sqrt(РеальнаяЧасть * РеальнаяЧасть + МнимаяЧасть * МнимаяЧасть);
            Фаза = Math.Atan2(МнимаяЧасть, РеальнаяЧасть);
        }

        private void РассчитатьАлгебраическуюФорму()
        {
            РеальнаяЧасть = Модуль * Math.Cos(Фаза);
            МнимаяЧасть = Модуль * Math.Sin(Фаза);
        }
    }

    class Программа
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Введите комплексное число 1 в формате a+b:");
            string ввод1 = Console.ReadLine();
            КомплексноеЧисло число1 = КомплексноеЧисло.ПолучитьИзСтроки(ввод1);

            Console.WriteLine("Введите комплексное число 2 в формате a+b:");
            string ввод2 = Console.ReadLine();
            КомплексноеЧисло число2 = КомплексноеЧисло.ПолучитьИзСтроки(ввод2);

            Console.WriteLine($"Число1: {число1}");
            Console.WriteLine($"Число2: {число2}");

            КомплексноеЧисло сумма = число1 + число2;
            Console.WriteLine($"Сумма: {сумма}");

            КомплексноеЧисло разность = число1 - число2;
            Console.WriteLine($"Разность: {разность}");

            КомплексноеЧисло произведение = число1 * число2;
            Console.WriteLine($"Произведение: {произведение}");

            КомплексноеЧисло частное = число1 / число2;
            Console.WriteLine($"Частное: {частное}");

            Console.WriteLine($"Число1 и число2 равны? {число1 == число2}");
            Console.WriteLine($"Число1 и число2 не равны? {число1 != число2}");

            // Ожидание ввода пользователя для просмотра вывода
            Console.ReadLine();
        }
    }
}
